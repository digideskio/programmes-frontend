{% extends 'styleguide/amen/base.html.twig' %}
{% import _self as self %}

{% block section_name %}Programme - Items{% endblock %}

{% block content %}

        <h2 class="text--shout text--center centi">Programme types variations: </h2>
        {{ self.displayListOfRenderDescriptors(itemsOfDifferentTypes) }}

        <h2 class="text--shout text--center centi">UI Display variations: </h2>
        {{ self.displayListOfRenderDescriptors(itemsWithDifferentDisplayOptions) }}

        <h2 class="text--shout text--center centi">Html structure variations: </h2>
        {{ self.displayListOfRenderDescriptors(itemsWithDifferentHtmlStructure) }}

{% endblock %}


{% macro renderOptionsToString(renderOptions) %}
    {% import _self as _same %}
    {% if renderOptions | length > 0 %}
        <ul>
            {% for key, value in renderOptions %}
                {% if value is iterable %}
                    <b>{{ key }} </b>
                    {{_same.renderOptionsToString(value)}}
                {% else %}
                    <li>{{ key }} = {{ value }}</li>
                {% endif %}
            {% endfor %}
        </ul>
    {% endif %}
{% endmacro %}

{% macro displayListOfRenderDescriptors(listOfRenderDescriptorsDto) %}
    {% import _self as self %}

    {% for description, presenterArgs in listOfRenderDescriptorsDto %}
        <div class="grid">
            <div class="grid__item 1/3 grid__item--column">
                <div>
                    <b>Description:</b> {{description}}
                </div>
                <div>
                    {{ds_amen('programme', presenterArgs['item'], presenterArgs['render_options'])}}
                </div>
                <div>
                    {% if presenterArgs['render_options'] | length > 0 %}
                        <b>Render options:</b>
                        {{self.renderOptionsToString(presenterArgs['render_options'])}}
                    {% else %}
                        <b>Render options:</b> Defaults
                    {% endif %}
                </div>
            </div>
        </div>

    {% endfor %}
{% endmacro %}
